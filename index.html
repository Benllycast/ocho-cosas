<!doctype html>
<html>
	<head>
		<meta charset="utf8">
		<meta name="viewport" content="width=device-width" />
		<title>8 Cosas que debes saber de JavaScript</title> 
		<link rel="stylesheet" type="text/css" href="components/bespoke.js/demo/themes.css" />
		<link rel="stylesheet" type="text/css" href="css/screen.css" />
		<link href="http://fonts.googleapis.com/css?family=Raleway+Dots|Roboto+Slab:400,300,700" rel="stylesheet" type="text/css">
	</head>
	<body class="coverflow">
		<div id="main">
			<article>
				<section class="intro">
					<div class="centered">					
						<h1>Ocho cosas que debes saber de JavaScript</h1>
						<p class="by">por</p>
						<p class="author">David Avellaneda <a href="//twitter.com/davsket">@davsket</a></p>
					</div>
				</section>
				<section class="intro">
					<div class="centered">					
						<h3>sobre mí</h3>
						<div class="img-me">
							<img src="img/me.jpg">
						</div>
						<p>Soy front-end developer y co-fundador de <a href="//monoku.com">Monoku</a> y <a href="//monomi.co">Monomi</a> y también soy co-organizador de <a href="//bogotajs.com">BogotaJS</a>.</p>
					</div>
				</section>

				<!--
				<section class="subject">
					<div class="centered">	
						<h2>funciones ternarias</h2>
					</div>
				</section>
				
				<section>
					<div class="centered">	
						<h3>Def.</h3>
						<p>Es una función que evalúa una condición y dependiendo de su validez ejecuta una de dos expresiones.</p>
					</div>
				</section>
				
				<section>
					<div class="centered">	
						<h3>Uso</h3>
						<pre><code class="language-javascript">&lt;condición&gt; ? &lt;si verdadero&gt; : &lt;si falso&gt;;</code></pre>
					</div>
				</section>
				
				<section>
					<div class="centered">	
						<h3>Ejemplo</h3>
						<pre><code class="language-javascript">var horas = (new Date()).getHours(),
		periodo = horas > 12 ? 'pm' : 'am';</code></pre>
					</div>
				</section>
				
				<section>
					<div class="centered">	
						<h3>Uso innecesario</h3>
						<pre><code class="language-javascript">var x = (1 < 2) ? true : false;</code></pre>
						<pre><code class="language-javascript">var x = (1 < 2);</code></pre>
					</div>
				</section>
				
				<section>
					<div class="centered">	
						<h3>Uso incorrecto</h3>
						<pre><code class="language-javascript">var x = ( Math.random() > 0.5 && window.ontouchend ) ? document.addEventListener('click', function(evt){ var z = evt.target.offsetHeight }) : document.addEventListener('touchend', function(evt){ var z = evt.target.offsetHeight });</code></pre>
					</div>
				</section>
				-->

				<section class="subject">
					<div class="centered">	
						<h2>coerción</h2>
					</div>
				</section>
				
				<section>
					<div class="centered">	
						<h3>Def.</h3>
						<p>Es forzar el cambio de un tipo a otro, por ejemplo: cambiar de un número a una cadena de texto.</p>
					</div>
				</section>

				
				<section>
					<div class="centered">	
						<h3>Temor</h3>
						<p>Algunos temen el uso de la coerción y la tildan como mala práctica, e incluso como peligrosa.</p>
					</div>
				</section>
				
				<section>
					<div class="centered">	
						<h3>Pero</h3>
						<p>La coerción se encuentra <strong>naturalmente</strong> en JavaScript.</p>
						<i>De hecho es natural en muchos lenguajes.</i>
					</div>
				</section>
				
				<section>
					<div class="centered">	
						<h3>Muchas veces pasa <strong>implícitamente</strong></h3>
					</div>
				</section>
				
				<section>
					<div class="centered">	
					<h3>Cuando verificas si una variable existe</h3>
						<pre><code class="language-javascript">if( variable ){}
// JavaScript lo coerce a booleano
// es equivalente a:
if( Boolean(variable) ){}
// o...
if( !!variable ){}</code></pre>
					</div>
				</section>
				
				<section>
					<div class="centered">	
					<h3>Cuando accedes una propiedad sin string</h3>
						<pre><code class="language-javascript">myObj[ 3 ]; 
// JavaScript lo coerce a string
myObj[ '3' ]
// Yep, arreglos tambien aplican
[ 1, 2, 3 ][ '2' ]  //  3
</code></pre>
					</div>
				</section>
				
				<section>
					<div class="centered">	
						<h3>Cuando usas isNaN</h3>
						<figure><strong>15.1.2.4 isNaN (number)</strong> <br>
	Returns true if the argument coerces to NaN, and otherwise returns false.
							<figcaption><a href="http://es5.github.io/#x15.1.2.4" title="">Annotated ECMAScript 5</a></figcaption>
						</figure>	
					</div>
				</section>
				
				<section>
					<div class="centered">	
					<h3>...isNaN</h3>
						<pre><code class="language-javascript">isNaN( '3' )
// +'3' -> 3
// entonces
> false

isNaN( '3px' )
// +'3px' -> NaN
> true</code></pre>
					</div>
				</section>
				
				<section>
					<div class="centered">	
					<h3>...isNaN (2)</h3>
						<pre><code class="language-javascript">isNaN( '' )
// +'' -> 0
> false

isNaN( {} )
// +{} -> NaN
> true</code></pre>
					</div>
				</section>
				
				<section>
					<div class="centered">	
					<h3>...isNaN!! (3)</h3>
						<pre><code class="language-javascript">isNaN( { valueOf: function(){ return 2 }} )
//+{ valueOf: function(){ return 2 }} -> 2
> false

isNaN( { valueOf: function(){ return '' }} )
// +{ valueOf: function(){ return 0 }} -> +'' -> 0
> false</code></pre>
					</div>
				</section>

				<section>
					<div class="centered">	
						<h3>o <strong>explícito</strong>...</h3>
					</div>
				</section>
				
				<section>
					<div class="centered">	
					<h3>Cuando concatenas...</h3>
						<pre><code class="language-javascript">var edad = 20;
console.log( "Tu edad es: " + edad ); 
// JavaScript coerce edad&lt;number&gt; a string
console.log( "Tu edad es: " + "20" )</code></pre>
					</div>
				</section>
				
				<section>
					<div class="centered">	
					<h3>Cuando usas un contructor de tipo core como función, es decir, sin <strong>new</strong></h3>
						<pre><code class="language-javascript">Boolean( 19 ) // true
String( 19 ) // '19'
Number( '19' ) // 19
Number( true ) // 1</code></pre>
					</div>
				</section>
				
				<!--
				<section>
					<div class="centered">	
						<h3>O incluso con <strong>new</strong> estás coercionando.</h3>
					</div>
				</section>
				-->
				
				<section>
					<div class="centered">	
					<h3>ej: coerción de fechas</h3>
						<pre><code class="language-javascript">var date = new Date()
date.getTime() // 1367795189000
date.valueOf() // 1367795189000
+ date // 1367795189000
date.toString() // "Sun May 05 2013 ..."
date + '' // "Sun May 05 2013 ..."</code></pre>
					</div>
				</section>
				
				<section>
					<div class="centered">	
					<h3>ej: coerción de strings</h3>
						<pre><code class="language-javascript">var text = '123'
parseInt( text ) // 123
Number( text ) // 123
+ text // 123</code></pre>
					</div>
				</section>
				
				<section>
					<div class="centered">	
					<h3>Coerción de strings (2)</h3>
						<pre><code class="language-javascript">var text = '34.5%'
Number( text ) // NaN
+ text // NaN
parseInt( text ) // 34 &lt;- yeah!
parseFloat( text ) // 34.5 &lt;- yeeeah!</code></pre>
					</div>
				</section>
				
				<section>
					<div class="centered">	
					<h3 class="bp">buena práctica</h3>
					<p>Usar <code class="language-javascript">parseInt</code> y <code class="language-javascript">parseFloat</code> para la conversión numérica.</p>
				</section>

				<section class="subject">
					<div class="centered">	
						<h2>operadores bit a bit</h2>
					</div>
				</section>

				
				<section>
					<div class="centered">	
						<h3>WARNING!</h3>
						<p>El uso de operadores bit a bit fuera de operaciones booleanas o binarias se presta para errores.
						</p>
					</div>
				</section>
				
				<section>
					<div class="centered">	
						<h3>String.indexOf ( less Evil )</h3>
						<pre><code class="language-javascript">~str.indexOf(',')
~-1 // 0 -> false
~0 // 1
~1 // 2
~2 // 3
~n // n+1
~21474836479 // 0 -> false -> fail!, común?
</code></pre>
					</div>
				</section>
				
				<section>
					<div class="centered">	
						<h3>Mejores soluciones..</h3>
						<pre><code class="language-javascript">str.indexOf(',') + 1
str.indexOf(',') > -1 // más legible
str.indexOf(',') >= 0 // más legible
</code></pre>
					</div>
				</section>
				
				<section>
					<div class="centered">	
						<h3>Redondeo o Floor ( so Evil )</h3>
						<pre><code class="language-javascript">// NOT
~~10.2 // 10
// SHIFT
10.2 >>> 0 // 10
// SHIFT (Sign-propagating)
-10.2 >> 0 // -10
// XOR
10.2 ^ 0 // 10
// OR
10.2 | 0 // 10</code></pre>
					</div>
				</section>
				
				<section>
					<div class="centered">	
						<h3>Pero</h3>
						<p>Las operaciones binarias no tienen encuenta signo y se encuentran
							limitadas a 4 bytes (32 bits) y los números pueden ir hasta 8 bytes o más.</p>
						<pre><code class="language-javascript">var n = 2147483647
console.log( n.toString( 2 ) )
> 1111111111111111111111111111111
// 01111111111111111111111111111111</code></pre>
					</div>
				</section>
				
				<section>
					<div class="centered">	
						<h3>ERROR!</h3>
						<pre><code class="language-javascript">// NOT
~~2147483647 // -2147483648
// SHIFT
8589934591 >>> 0 // 4294967295
-10.2 >>> 0 // 4294967286
// SHIFT (Sign-propagating)
2147483648 >> 0 // -2147483648</code></pre>
					</div>
				</section>
				
				<section>
					<div class="centered">	
					<h3 class="bp">buena práctica</h3>
					<p>Usar <code class="language-javascript">Math.round</code>, <code class="language-javascript">Math.floor</code> y <code class="language-javascript">Math.ceil</code> para redondear los números.</p>
				</section>
				

				<!--
				<section class="subject">
					<div class="centered">	
						<h2>Math, parseInt y globales</h2>
					</div>
				</section>
				-->

				<section class="subject">
					<div class="centered">	
						<h2>hoisting</h2>
					</div>
				</section>

				<section>
					<div class="centered">
						<figure><strong>hoist</strong> <br>
	To raise or haul up with or as if with the help of a mechanical apparatus.
							<figcaption><a href="http://www.thefreedictionary.com/hoisting" title="">The Free Dictionary</a></figcaption>
						</figure>	
					</div>
				</section>
				
				<section>
					<div class="centered">	
						<h3>Def.</h3>
						<p>Javascript siempre lleva la definición de variables ( cualquiera ) al comienzo de la función ( realmente scope ).</p>
					</div>
				</section>
				
				<section>
					<div class="centered">	
						<h3>ejemplo</h3>
						<pre><code class="language-javascript">var i = 1,
	j = 2
function hoisting(){
	console.log( i )
	console.log( j )
	var i = 3
	console.log( i )
}
hoisting()</code></pre>
					</div>
				</section>
				
				<section>
					<div class="centered">	
						<h3>lo que realmente imprime</h3>
						<pre><code class="language-javascript">var i = 1,
	j = 2
function hoisting(){
	console.log( i ) // undefined
	console.log( j ) // 2
	var i = 3
	console.log( i ) // 3
}
hoisting()</code></pre>
					</div>
				</section>
				
				<section>
					<div class="centered">	
						<h3>lo que pasa</h3>
						<pre data-line="4"><code class="language-javascript">var i = 1,
	j = 2
function hoisting(){
	var i
	console.log( i )
	console.log( j )
	i = 3
	console.log( i )
}
hoisting()</code></pre>
					</div>
				</section>
				
				<section>
					<div class="centered">	
						<h3>ejemplo con funciones</h3>
						<pre><code class="language-javascript">console.log( func1() )
console.log( func2() )
function func1(){ return 1 }
var func2 = function(){ return 2 }
</code></pre>
					</div>
				</section>
				
				<section>
					<div class="centered">	
						<h3>ejemplo con funciones</h3>
						<pre><code class="language-javascript">console.log( func1() )
console.log( func2() ) 
function func1(){return 1} // declaración
var func2 = function(){return 2} // expresión
</code></pre>
					</div>
				</section>
				
				<section>
					<div class="centered">	
						<h3>ejemplo con funciones</h3>
						<pre><code class="language-javascript">console.log( func1() ) // 1
console.log( func2() ) // TypeError
function func1(){ return 1 }
var func2 = function(){ return 2 }
</code></pre>
					</div>
				</section>
				
				<section>
					<div class="centered">	
						<h3>lo que pasa</h3>
						<pre><code class="language-javascript">var func2;
function func1(){ return 1 }
console.log( func1() )
console.log( func2() )
func2 = function(){ return 2 }
</code></pre>
					</div>
				</section>
				
				<section>
					<div class="centered">	
						<h3>ejemplo feo</h3>
						<pre><code class="language-javascript">function foo(){
    function bar() {
        return 3;
    }
    return bar();
    function bar() {
        return 8;
    }
}
alert(foo());</code></pre>
					<a href="http://javascriptweblog.wordpress.com/2010/07/06/function-declarations-vs-function-expressions/" class="ref">Function Declarations vs. Function Expressions by Angus Croll</a>
					</div>
				</section>

				<section>
					<div class="centered">	
						<h3 class="bp">buena práctica</h3>
						<p>Definir todas las variables lo antes posible en la función.</p>
					</div>
				</section>

				<section class="subject">
					<div class="centered">	
						<h2>scope</h2>
					</div>
				</section>

				<section>
					<div class="centered">	
						<h3>Def.</h3>
						<p>Se refiere al entorno de definición de las variables, usalmente una función tiene acceso a los scopes superiores, pero no a inferiores.</p>
					</div>
				</section>
				
				<section>
					<div class="centered">	
						<h3>ejemplo scope</h3>
						<pre><code class="language-javascript">var a = 3, 
	b = 4;
function func(){ 
	var a = 4;
	return a + b;
}
func(); // 8;</code></pre>
					</div>
				</section>
				
				<section>
					<div class="centered">	
						<h3>ejemplo scope</h3>
						<pre><code class="language-javascript">var a = 3, 
	b = 4;
function func(){ 
	var a = 4;
	function funcInterna(){
		var b = 0;
		a = 0;
	}
	funcInterna();
	return a + b;
}
func(); // 4</code></pre>
					</div>
				</section>
				
				<section>
					<div class="centered">	
					<h3 class="bp">buena práctica</h3>
					<p>Siempre definir las variables de la función usando <code class="language-javascript">var</code>.</p>
				</section>
				
				<section>
					<div class="centered">	
					<h3 class="bp">buena práctica</h3>
					<p>Usar la expresión <code class="language-javascript">"use strict";</code> para evitar el cambio de variables externas al scope.</p>
				</section>

				<section class="subject">
					<div class="centered">	
						<h2>bind, call, apply</h2>
					</div>
				</section>

				<section>
					<div class="centered">	
						<h3>bind, call, apply</h3>
						<p>Todas son funciones de las funciones</p>
					</div>
				</section>

				<section>
					<div class="centered">	
						<h3>bind( this )</h3>
						<p>Retorna una nueva función done el <code class="language-javascript">this</code> es suplantado.</p>
					</div>
				</section>
				
				<section>
					<div class="centered">	
						<h3>ejemplo bind</h3>
						<pre><code class="language-javascript">var obj = {
		a: 3,
		f: function(){
			return this.a;
		}
	},
	a = 5;
obj.f() // 3
obj.f.bind( this )() // 5
obj.f() // 3</code></pre>
					</div>
				</section>

				<section>
					<div class="centered">	
						<h3>call( this, [param1, [ param2, ...]])</h3>
						<p>Ejecuta una función definiendo el <code class="language-javascript" class="language-javascript">this</code> para la ejecución y recibe los parámetros.</p>
					</div>
				</section>
				
				<section>
					<div class="centered">	
						<h3>ejemplo call</h3>
						<pre><code class="language-javascript">var obj = {
		r: 3,
		f: function( p ){
			return p * this.r;
		}
	},
	obj2 = {
		r: 5
	};
obj.f( 2 ) // 6
obj.f.call( obj2, 2 ) // 10</code></pre>
					</div>
				</section>

				<section>
					<div class="centered">	
						<h3>apply( this, params[])</h3>
						<p>Ejecuta una función definiendo el <code class="language-javascript">this</code> de una función y sus parámetros como un arreglo.</p>
					</div>
				</section>
				
				<section>
					<div class="centered">	
						<h3>ejemplo apply</h3>
						<pre><code class="language-javascript">var obj = {
		r: 3,
		f: function( p, q ){
			return p * this.r + q;
		}
	},
	obj2 = {
		r: 5
	};
obj.f( 2, 2 ) // 8
obj.f.call( obj2, [2, 2] ) // 12</code></pre>
					</div>
				</section>

				<section>
					<div class="centered">	
						<h3>pero apply es más cool que eso!</h3>
					</div>
				</section>
				
				<section>
					<div class="centered">	
						<h3>ejemplo <strong>cool</strong> de apply</h3>
						<pre><code class="language-javascript">var arr = [23, 45, 17, 9]
Math.max.apply(null, arr) // 45
Math.min.apply(null, arr) // 9
</code></pre>
					</div>
				</section>

				<section class="subject">
					<div class="centered">	
						<h2>prototype</h2>
					</div>
				</section>

				<section>
					<div class="centered">	
						<h3>Def.</h3>
						<p>Es una cadena de herencia de funcionalidades y propiedades.</p>
					</div>
				</section>

				<section>
					<div class="centered">	
						<h3>Ejemplo</h3>
						<p>En el prototipo del <code class="language-javascript">Array</code> existen diferentes funcionalidades dentro de un mismo tipo.</p>
						<img src="img/array_proto.png" alt="" style="height: 40vh;width: auto;">
					</div>
				</section>

				<section>
					<div class="centered">	
						<h3>ventaja</h3>
						<p>Se puede extender en tiempo de ejecución a todas las variables de un mismo tipo.</p>
					</div>
				</section>
				
				<section>
					<div class="centered">	
						<h3>extensión</h3>
						<pre><code class="language-javascript">var arr = []
console.log( arr.ola )
> undefined
Array.prototype.ola = "k ase"
console.log( arr.ola )
> "k ase"
</code></pre>
					</div>
				</section>
				
				<section>
					<div class="centered">	
						<h3>extensión <strong>cool</strong></h3>
						<pre><code class="language-javascript">var bbc = "BogotáBeerCompany"
String.prototype.rocks = function(){
	return "&#10026; " + this + " Rocks! &#10026;"
}
bbc.rocks()
> &#10026; BogotáBeerCompany Rocks! &#10026;
</code></pre>
					</div>
				</section>

				<section>
					<div class="centered">	
						<h3>Warning... ?</h3>
						<p>Colisión de definiciones, es como jugar a modificar un name-space.</p>
					</div>
				</section>
				
				<section>
					<div class="centered">	
						<h3>extensión</h3>
						<pre><code class="language-javascript">Object.defineProperty( String.prototype, 'slugify', {
	value: function slugify() { ... },
	configurable: true,
	enumerable: false,
	writeable: true
});
</code></pre>
					</div>
				</section>

				<section class="subject">
					<div class="centered">	
						<h2>JavaScript es UCS-2</h2>
					</div>
				</section>

				<section>
					<div class="centered">	
						<pre class="show-next-on-hover"><span title="finlandés">hämmästyttävä</span>  <span title="serbio">невероватно</span>  <span title="bielorruso">дзіўны</span>  <span title="eslovaco">úžasný</span>  <span title="cirílico">удивительный</span>  <span title="koreano">놀랄만한</span>  <span title="tailandés">น่าอัศจรรย์</span>  <span title="yídish">אַמייזינג</span> <span title="vietnamita">tuyệt vời</span>  <span title="telugu">ఆశ్చర్యం</span>  <span title="tamil">அற்புதமான</span>  <span title="chino">驚人</span>  <span title="persa">شگفت</span>  <span title="árabe">مدهش انگیز</span>  <span title="lao">ເຮັດໃຫ້ປະລາດ</span>  <span title="georgiano">საოცარი</span>  <span title="armenio">զարմանալի</span>  <span title="bengalí">আশ্চর্যজনক</span></pre>
						http://mothereff.in/js-variables
					</div>
				</section>

				<section>
					<div class="centered">	
						<h3>Muchos caracteres</h3>
						<pre class="language-javascript"><code>var π = Math.PI,
	ಠ_ಠ = eval,
	λ = function() {}</code></pre>
					</div>
				</section>

				<section>
					<div class="centered">	
						<h3>Pero en resumen... Espagnol</h3>
						<pre class="language-javascript"><code>var año = 2013,
	español = true,
	cuánto = 12000
function cálculoExtraño(){
	return año * cuánto
}

if( español ){
	cálculoExtraño()
}
> 24156000 //Oh si!</code></pre>
					</div>
				</section>

				<section>
					<div class="centered">	
						<h2>el punto y coma es <strong>opcional</strong></h2>
					</div>
				</section>

				<section>
					<div class="centered">	
						<h3>Sip, puede provocar errores...</h3>
						<p>Pero si los conoces los puedes evitar, incluso pasan con el uso de punto y coma...</p>
					</div>
				</section>

				<section>
					<div class="centered">	
						<h3>return statement</h3>
						<p>Si return recibe un cambio de línea, retorna undefined.</p>
						<pre class="language-javascript"><code>function(){
	return 
	{
		edad: 20
	};
}
></code></pre>
					</div>
				</section>

				<section>
					<div class="centered">	
						<h3>return statement solved</h3>
						<pre class="language-javascript"><code>function(){
	return {
		edad: 20
	}
}
></code></pre>
					</div>
				</section>

				<section>
					<div class="centered">	
						<h3>paréntesis, el "enemigo"</h3>
						<pre class="language-javascript"><code>var a = 1, b = 2, c = 3
(a * b)
> Number is not a function
></code></pre>
					</div>
				</section>

				<section>
					<div class="centered">	
						<h3>paréntesis, solución</h3>
						<pre class="language-javascript"><code>var a = 1, b = 2, c = 3(a * b)
></code></pre>
					</div>
				</section>

				<section>
					<div class="centered">	
						<h3>pero pasaba antes del boom</h3>
						<pre class="language-javascript"><code>(function(){ return 2 }())
(function(){ return 3 }())
//Number is not a function
></code></pre>
					</div>
				</section>

				<section>
					<div class="centered">	
						<h3>pero pasaba antes del boom</h3>
						<pre class="language-javascript"><code>(function(){ return 2 }());
(function(){ return 3 }())
//Number is not a function
></code></pre>
					</div>
				</section>

				<section>
					<div class="centered">	
						<h3>si, los paréntesis son delicados</h3>
						<p>y requieren punto y coma para evitar este tipo de errores.</p>
					</div>
				</section>

				<section>
					<div class="centered">	
						<h3>FIN</h3>
						<p>David Avellaneda <br>
						<a href="http://twitter.com/davsket">@davsket</a>
						</p>
						<p>
						Slides en: <a href="http://github.com/davsket/ten-things">davsket/ten-things</a> <br><br>
						<small>PD: originalmente incluía: <br>1) Funciones ternarias y <br>3) Math, parseInt y globales.</small></p>
					</div>
				</section>
			</article>
		</div>

		<footer>
			<div class="credits">
				<a href="http://twitter.com/davsket"><img src="https://si0.twimg.com/profile_images/1362250398/174501_575306611_2864456_n_normal.jpg" alt="David Avellaneda"></a>
				<p>David Avellaneda - <a href="http://twitter.com/davsket">@davsket</a></p>
			</div>
		</footer>

		<script src="components/bespoke.js/src/bespoke.js"></script>
		<script src="components/bespoke-hash/src/bespoke-hash.js"></script>
		<script src="components/prism/prism.js"></script>
		<script src="components/prism/plugins/line-highlight/prism-line-highlight.js"></script>
		<script src="js/init.js"></script>
	</body>
</html>